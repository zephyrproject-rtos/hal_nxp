<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>drivers.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script src="http://www.nxp.com/files/abstract/misc/COLLATERALTEMPLATE_infocenter.js" type="text/javascript" xml:space="preserve"><!-- --></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="html_custom.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="NXP_FullColor_RGB_wrapped.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">Sensor Fusion for Kinetis MCUs (ISSDK/KSDK version)</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>API</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('drivers_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">drivers.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for drivers.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h__incl.png" border="0" usemap="#drivers_8h" alt=""/></div>
<map name="drivers_8h" id="drivers_8h">
</map>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h__dep__incl.png" border="0" usemap="#drivers_8hdep" alt=""/></div>
<map name="drivers_8hdep" id="drivers_8hdep">
<area shape="rect" id="node2" href="driver__FXAS21002_8c.html" title="Provides init() and read() functions for the FXAS21002 gyroscope. " alt="" coords="5,87,144,114"/>
<area shape="rect" id="node3" href="driver__FXLS8471Q_8c.html" title="Provides init() and read() functions for the FXLS8471Q 3&#45;axis accel. " alt="" coords="168,87,307,114"/>
<area shape="rect" id="node4" href="driver__FXLS8952_8c.html" title="Provides init() and read() functions for the FXLS8952 3&#45;axis accelerometer. " alt="" coords="331,87,461,114"/>
<area shape="rect" id="node5" href="driver__FXOS8700_8c.html" title="Provides init() and read() functions for the FXOS8700 6&#45;axis accel plus mag. " alt="" coords="485,87,617,114"/>
<area shape="rect" id="node6" href="driver__MAG3110_8c.html" title="Provides init() and read() functions for the MAG3110 magnetometer. " alt="" coords="641,87,769,114"/>
<area shape="rect" id="node7" href="driver__MMA845X_8c.html" title="Provides init() and read() functions for the MMA845x 3&#45;axis accel family. " alt="" coords="794,87,923,114"/>
<area shape="rect" id="node8" href="driver__MMA8652_8c.html" title="Provides init() and read() functions for the MMA8652 3&#45;axis accel family. " alt="" coords="947,87,1077,114"/>
<area shape="rect" id="node9" href="driver__MPL3115_8c.html" title="Provides init() and read() functions for the MPL3115 pressure sensor/altimeter. " alt="" coords="1101,87,1227,114"/>
<area shape="rect" id="node10" href="driver__systick_8c.html" title="Encapsulates the ARM sysTick counter, which is used for benchmarking. " alt="" coords="1251,87,1363,114"/>
<area shape="rect" id="node11" href="fusion_8c.html" title="Lower level sensor fusion interface. " alt="" coords="1387,87,1453,114"/>
<area shape="rect" id="node12" href="main__agm01__freertos__two__tasks_8c.html" title="FreeRTOS (two task) implementation of sensor fusion on FRDM&#45;K64F. " alt="" coords="1477,80,1624,121"/>
<area shape="rect" id="node13" href="main__baremetal_8c.html" title="Bare metal implementation of sensor fusion on FRDM&#45;K64F. " alt="" coords="1648,87,1773,114"/>
<area shape="rect" id="node14" href="main__freertos__agm02_8c.html" title="FreeRTOS (two task) implementation of sensor fusion on FRDM&#45;K64F/FRDM&#45;FXS&#45;AGM02. " alt="" coords="1797,87,1955,114"/>
<area shape="rect" id="node15" href="main__freertos__agm02__power__cycling_8c.html" title="FreeRTOS (two task) implementation of sensor fusion on FRDM&#45;K64F/FRDM&#45;FXS&#45;AGM02 with smart power&#45;cycl..." alt="" coords="1979,80,2125,121"/>
<area shape="rect" id="node16" href="main__freertos__single__task_8c.html" title="FreeRTOS (single task) implementation of sensor fusion on FRDM&#45;K64F. " alt="" coords="2149,80,2291,121"/>
<area shape="rect" id="node17" href="main__freertos__two__tasks_8c.html" title="FreeRTOS (two task) implementation of sensor fusion on FRDM&#45;K64F. " alt="" coords="2315,87,2493,114"/>
<area shape="rect" id="node18" href="sensor__fusion_8c.html" title="The sensor_fusion.c file implements the top level programming interface. " alt="" coords="2517,87,2630,114"/>
<area shape="rect" id="node19" href="status_8c.html" title="Application&#45;specific status subsystem. " alt="" coords="2655,87,2724,114"/>
</map>
</div>
</div>
<p><a href="drivers_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">SysTick Macros</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>The ARM SysTick counter is used to time various fusion options. Timings are then conveyed to the NXP Sensor Fusion Toolbox, where they are displayed for the developer. These functions should be portable to any ARM M0+, M3, M4 or M4F device. If you are using a different CPU architecture, you will need to provide an equivalent set of macros, remove the macro calls from the fusion routines, or define a set of empty macros. </p>
</div></td></tr>
<tr class="memitem:a12342d97ebedd191c344ea0d5e1e7646"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a12342d97ebedd191c344ea0d5e1e7646">ARM_systick_enable</a> (void)</td></tr>
<tr class="separator:a12342d97ebedd191c344ea0d5e1e7646"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae65d7c74792e6da713e9b5a239475824"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#ae65d7c74792e6da713e9b5a239475824">ARM_systick_start_ticks</a> (int32_t *pstart)</td></tr>
<tr class="separator:ae65d7c74792e6da713e9b5a239475824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f406cc7d44610e21efc63b0faeefbe9"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a8f406cc7d44610e21efc63b0faeefbe9">ARM_systick_elapsed_ticks</a> (int32_t start_ticks)</td></tr>
<tr class="separator:a8f406cc7d44610e21efc63b0faeefbe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52c4ad21a29460539f43e8781d9fcfbf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a52c4ad21a29460539f43e8781d9fcfbf">ARM_systick_delay_ms</a> (uint32_t iSystemCoreClock, uint32_t delay_ms)</td></tr>
<tr class="separator:a52c4ad21a29460539f43e8781d9fcfbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Sensor Drivers</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Each physical sensor must be provided with one initialization function and one "read" function. These must be installed by the user using the installSensor method defined in <a class="el" href="structSensorFusionGlobals.html" title="The top level fusion structure. ">SensorFusionGlobals</a>. By "physical sensor", we mean either individual sensor type (such as a 3-axis accelerometer) or a combo-sensor such as the NXP FXOS8700 6-axis accel plus mag. The init() function for each sensor is responsible for initializing all sensors contained in that package. The read() function is responsible for reading those same sensors and moving the results into the standard structures contained within the <a class="el" href="structSensorFusionGlobals.html" title="The top level fusion structure. ">SensorFusionGlobals</a> object. </p>
</div></td></tr>
<tr class="memitem:a3e1e95cf3c04b11bd0aea5368269e4e3"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a3e1e95cf3c04b11bd0aea5368269e4e3">MPL3115_Init</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a3e1e95cf3c04b11bd0aea5368269e4e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a905984cc5f2e42228183217f6d071fb8"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a905984cc5f2e42228183217f6d071fb8">FXOS8700_Init</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a905984cc5f2e42228183217f6d071fb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba7e2b11087e48b339ecd8c2b1f4ae09"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#aba7e2b11087e48b339ecd8c2b1f4ae09">FXAS21002_Init</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:aba7e2b11087e48b339ecd8c2b1f4ae09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17ba4ee17faecde2b6752868995c768b"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a17ba4ee17faecde2b6752868995c768b">MMA8652_Init</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a17ba4ee17faecde2b6752868995c768b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57bee86d9c17a5bfffd019bef488fce3"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a57bee86d9c17a5bfffd019bef488fce3">FXLS8952_Init</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a57bee86d9c17a5bfffd019bef488fce3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab25e9152fa726f2bcd148b9a0dbde157"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#ab25e9152fa726f2bcd148b9a0dbde157">MAG3110_Init</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:ab25e9152fa726f2bcd148b9a0dbde157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a0c55b69ebc03426cc9dd26d7560de"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a23a0c55b69ebc03426cc9dd26d7560de">MMA8451_Init</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a23a0c55b69ebc03426cc9dd26d7560de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a562362f122065dbadacd859672964596"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a562362f122065dbadacd859672964596">FXLS8471Q_Init</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a562362f122065dbadacd859672964596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c7ac9be0b5038427b17e268320018ac"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a6c7ac9be0b5038427b17e268320018ac">MPL3115_Read</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a6c7ac9be0b5038427b17e268320018ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15f78e72d6a7dec25d95d97fa4c8d00e"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a15f78e72d6a7dec25d95d97fa4c8d00e">FXOS8700_Read</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a15f78e72d6a7dec25d95d97fa4c8d00e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a958f7496eb58d44950cffafcde9e3254"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a958f7496eb58d44950cffafcde9e3254">FXAS21002_Read</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a958f7496eb58d44950cffafcde9e3254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af305ac46dced67ca87098d066b777ab2"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#af305ac46dced67ca87098d066b777ab2">MMA8652_Read</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:af305ac46dced67ca87098d066b777ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a360a222d07c3ea98c12a75bb1f5a8993"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a360a222d07c3ea98c12a75bb1f5a8993">FXLS8952_Read</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a360a222d07c3ea98c12a75bb1f5a8993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a814ed032bb557dfa5bd0349d06b92d26"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a814ed032bb557dfa5bd0349d06b92d26">MAG3110_Read</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a814ed032bb557dfa5bd0349d06b92d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a548e731f3f5eacb312e663f537338d97"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a548e731f3f5eacb312e663f537338d97">MMA8451_Read</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a548e731f3f5eacb312e663f537338d97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33189bcbbd5761f2b9b5032fd499e0ea"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a33189bcbbd5761f2b9b5032fd499e0ea">FXLS8471Q_Read</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a33189bcbbd5761f2b9b5032fd499e0ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a379dd1bcbaab047712b8cebb922fbd51"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a379dd1bcbaab047712b8cebb922fbd51">MPL3115_Idle</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a379dd1bcbaab047712b8cebb922fbd51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81eb6639a3336411c9c255f1db98ea7f"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a81eb6639a3336411c9c255f1db98ea7f">FXOS8700_Idle</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a81eb6639a3336411c9c255f1db98ea7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae77f08324a00fd69eaffa1e1c10bafb9"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#ae77f08324a00fd69eaffa1e1c10bafb9">FXAS21002_Idle</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:ae77f08324a00fd69eaffa1e1c10bafb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dca683dd2636b2638f42bb93ab71ea4"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a0dca683dd2636b2638f42bb93ab71ea4">MMA8652_Idle</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a0dca683dd2636b2638f42bb93ab71ea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af17182ffce5beb911d03551e43158164"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#af17182ffce5beb911d03551e43158164">FXLS8952_Idle</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:af17182ffce5beb911d03551e43158164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a708eb59e48e61ea04dce5a3d07884933"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a708eb59e48e61ea04dce5a3d07884933">MAG3110_Idle</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a708eb59e48e61ea04dce5a3d07884933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a222c12af70c00e7e6c67f665180b0645"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#a222c12af70c00e7e6c67f665180b0645">MMA8451_Idle</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:a222c12af70c00e7e6c67f665180b0645"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3e6043a3095f596460dd5d98dd1cd19"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drivers_8h.html#ae3e6043a3095f596460dd5d98dd1cd19">FXLS8471Q_Idle</a> (<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *sensor, <a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *<a class="el" href="main__freertos__two__tasks_8c.html#afa81c629d378fe700f351a1bce411ad5">sfg</a>)</td></tr>
<tr class="separator:ae3e6043a3095f596460dd5d98dd1cd19"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Users who are not using NXP hardware will need to supply their own drivers in place of those defined here. </p>

<p>Definition in file <a class="el" href="drivers_8h_source.html">drivers.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a52c4ad21a29460539f43e8781d9fcfbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ARM_systick_delay_ms </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>iSystemCoreClock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>delay_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__systick_8c_source.html#l00075">75</a> of file <a class="el" href="driver__systick_8c_source.html">driver_systick.c</a>.</p>

<p>Referenced by <a class="el" href="sensor__fusion_8c_source.html#l00471">initializeFusionEngine()</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="sensor__fusion_8h.html#ab7903878916593daecbeb95b98115ab0">int32</a> istart_ticks; <span class="comment">// start ticks on entry</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="sensor__fusion_8h.html#ab7903878916593daecbeb95b98115ab0">int32</a> ielapsed_ticks;   <span class="comment">// elapsed ticks</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="sensor__fusion_8h.html#aa0d0fdc87fd135ef2bedb030901cdb9c">int16</a> i;        <span class="comment">// loop counter</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">// loop for requested number of ms</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; delay_ms; i++)</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">// loop until 1ms has elapsed</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <a class="code" href="driver__systick_8c.html#a63b11c5b24615bf03103d7d9e923ba2f">ARM_systick_start_ticks</a>(&amp;istart_ticks);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">do</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            ielapsed_ticks = <a class="code" href="driver__systick_8c.html#a11d2757f060c3c65c1dfe1f7a314bbb3">ARM_systick_elapsed_ticks</a>(istart_ticks);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        } <span class="keywordflow">while</span> (ielapsed_ticks &lt; iSystemCoreClock / 1000);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div><div class="ttc" id="sensor__fusion_8h_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="sensor__fusion_8h.html#ab7903878916593daecbeb95b98115ab0">int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00057">sensor_fusion.h:57</a></div></div>
<div class="ttc" id="driver__systick_8c_html_a11d2757f060c3c65c1dfe1f7a314bbb3"><div class="ttname"><a href="driver__systick_8c.html#a11d2757f060c3c65c1dfe1f7a314bbb3">ARM_systick_elapsed_ticks</a></div><div class="ttdeci">int32 ARM_systick_elapsed_ticks(int32 start_ticks)</div><div class="ttdef"><b>Definition:</b> <a href="driver__systick_8c_source.html#l00064">driver_systick.c:64</a></div></div>
<div class="ttc" id="sensor__fusion_8h_html_aa0d0fdc87fd135ef2bedb030901cdb9c"><div class="ttname"><a href="sensor__fusion_8h.html#aa0d0fdc87fd135ef2bedb030901cdb9c">int16</a></div><div class="ttdeci">int16_t int16</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00056">sensor_fusion.h:56</a></div></div>
<div class="ttc" id="driver__systick_8c_html_a63b11c5b24615bf03103d7d9e923ba2f"><div class="ttname"><a href="driver__systick_8c.html#a63b11c5b24615bf03103d7d9e923ba2f">ARM_systick_start_ticks</a></div><div class="ttdeci">void ARM_systick_start_ticks(int32 *pstart)</div><div class="ttdef"><b>Definition:</b> <a href="driver__systick_8c_source.html#l00055">driver_systick.c:55</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a52c4ad21a29460539f43e8781d9fcfbf_cgraph.png" border="0" usemap="#drivers_8h_a52c4ad21a29460539f43e8781d9fcfbf_cgraph" alt=""/></div>
<map name="drivers_8h_a52c4ad21a29460539f43e8781d9fcfbf_cgraph" id="drivers_8h_a52c4ad21a29460539f43e8781d9fcfbf_cgraph">
<area shape="rect" id="node2" href="driver__systick_8c.html#a63b11c5b24615bf03103d7d9e923ba2f" title="ARM_systick_start_ticks" alt="" coords="216,5,384,32"/>
<area shape="rect" id="node3" href="driver__systick_8c.html#a11d2757f060c3c65c1dfe1f7a314bbb3" title="ARM_systick_elapsed\l_ticks" alt="" coords="224,57,376,98"/>
</map>
</div>
</p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a52c4ad21a29460539f43e8781d9fcfbf_icgraph.png" border="0" usemap="#drivers_8h_a52c4ad21a29460539f43e8781d9fcfbf_icgraph" alt=""/></div>
<map name="drivers_8h_a52c4ad21a29460539f43e8781d9fcfbf_icgraph" id="drivers_8h_a52c4ad21a29460539f43e8781d9fcfbf_icgraph">
<area shape="rect" id="node2" href="sensor__fusion_8c.html#ab088da7731ffdf25710a364a7f88b224" title="This function is responsible for initializing the system prior to starting the main fusion loop..." alt="" coords="216,5,364,32"/>
<area shape="rect" id="node3" href="sensor__fusion_8h.html#a367d92b99365a8143700b76439915d65" title="utility function to insert default values in the top level structure " alt="" coords="412,5,575,32"/>
<area shape="rect" id="node4" href="main__agm01__freertos__two__tasks_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="623,5,673,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8f406cc7d44610e21efc63b0faeefbe9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_systick_elapsed_ticks </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>start_ticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__systick_8c_source.html#l00064">64</a> of file <a class="el" href="driver__systick_8c_source.html">driver_systick.c</a>.</p>

<p>Referenced by <a class="el" href="driver__systick_8c_source.html#l00075">ARM_systick_delay_ms()</a>, and <a class="el" href="fusion_8c_source.html#l00086">fFuseSensors()</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="sensor__fusion_8h.html#ab7903878916593daecbeb95b98115ab0">int32</a> elapsed_ticks;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// subtract the stored start ticks and check for wraparound down through zero</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    elapsed_ticks = start_ticks - (<a class="code" href="driver__systick_8c.html#ae3dc4d2dbfdf38c593a5581415fecfed">SYST_CVR</a> &amp; 0x00FFFFFF);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">if</span> (elapsed_ticks &lt; 0) elapsed_ticks += <a class="code" href="driver__systick_8c.html#a4e8efcc1f2b551dbf3cb0aae1231e380">SYST_RVR</a>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">return</span> elapsed_ticks;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div><div class="ttc" id="sensor__fusion_8h_html_ab7903878916593daecbeb95b98115ab0"><div class="ttname"><a href="sensor__fusion_8h.html#ab7903878916593daecbeb95b98115ab0">int32</a></div><div class="ttdeci">int32_t int32</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00057">sensor_fusion.h:57</a></div></div>
<div class="ttc" id="driver__systick_8c_html_a4e8efcc1f2b551dbf3cb0aae1231e380"><div class="ttname"><a href="driver__systick_8c.html#a4e8efcc1f2b551dbf3cb0aae1231e380">SYST_RVR</a></div><div class="ttdeci">#define SYST_RVR</div><div class="ttdef"><b>Definition:</b> <a href="driver__systick_8c_source.html#l00039">driver_systick.c:39</a></div></div>
<div class="ttc" id="driver__systick_8c_html_ae3dc4d2dbfdf38c593a5581415fecfed"><div class="ttname"><a href="driver__systick_8c.html#ae3dc4d2dbfdf38c593a5581415fecfed">SYST_CVR</a></div><div class="ttdeci">#define SYST_CVR</div><div class="ttdef"><b>Definition:</b> <a href="driver__systick_8c_source.html#l00040">driver_systick.c:40</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a8f406cc7d44610e21efc63b0faeefbe9_icgraph.png" border="0" usemap="#drivers_8h_a8f406cc7d44610e21efc63b0faeefbe9_icgraph" alt=""/></div>
<map name="drivers_8h_a8f406cc7d44610e21efc63b0faeefbe9_icgraph" id="drivers_8h_a8f406cc7d44610e21efc63b0faeefbe9_icgraph">
<area shape="rect" id="node2" href="drivers_8h.html#a52c4ad21a29460539f43e8781d9fcfbf" title="ARM_systick_delay_ms" alt="" coords="205,5,368,32"/>
<area shape="rect" id="node5" href="fusion_8h.html#aeb60375528d75ee9fec67a96916141ca" title="fFuseSensors" alt="" coords="235,56,338,83"/>
<area shape="rect" id="node3" href="sensor__fusion_8c.html#ab088da7731ffdf25710a364a7f88b224" title="This function is responsible for initializing the system prior to starting the main fusion loop..." alt="" coords="416,5,564,32"/>
<area shape="rect" id="node4" href="sensor__fusion_8h.html#a367d92b99365a8143700b76439915d65" title="utility function to insert default values in the top level structure " alt="" coords="612,31,775,57"/>
<area shape="rect" id="node6" href="sensor__fusion_8c.html#a8b90119fee979d0309cc923bf1fad543" title="runFusion the top level call that actually runs the sensor fusion. This is a utility function which m..." alt="" coords="451,56,529,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a12342d97ebedd191c344ea0d5e1e7646"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ARM_systick_enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__systick_8c_source.html#l00047">47</a> of file <a class="el" href="driver__systick_8c_source.html">driver_systick.c</a>.</p>

<p>Referenced by <a class="el" href="sensor__fusion_8c_source.html#l00471">initializeFusionEngine()</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="driver__systick_8c.html#ab26b3fc75982181f81b185b206e897f6">SYST_CSR</a> = 0x5u;        <span class="comment">// enable systick from internal clock</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="driver__systick_8c.html#a4e8efcc1f2b551dbf3cb0aae1231e380">SYST_RVR</a> = 0x00FFFFFFu; <span class="comment">// set reload to maximum 24 bit value</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div><div class="ttc" id="driver__systick_8c_html_a4e8efcc1f2b551dbf3cb0aae1231e380"><div class="ttname"><a href="driver__systick_8c.html#a4e8efcc1f2b551dbf3cb0aae1231e380">SYST_RVR</a></div><div class="ttdeci">#define SYST_RVR</div><div class="ttdef"><b>Definition:</b> <a href="driver__systick_8c_source.html#l00039">driver_systick.c:39</a></div></div>
<div class="ttc" id="driver__systick_8c_html_ab26b3fc75982181f81b185b206e897f6"><div class="ttname"><a href="driver__systick_8c.html#ab26b3fc75982181f81b185b206e897f6">SYST_CSR</a></div><div class="ttdeci">#define SYST_CSR</div><div class="ttdef"><b>Definition:</b> <a href="driver__systick_8c_source.html#l00038">driver_systick.c:38</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a12342d97ebedd191c344ea0d5e1e7646_icgraph.png" border="0" usemap="#drivers_8h_a12342d97ebedd191c344ea0d5e1e7646_icgraph" alt=""/></div>
<map name="drivers_8h_a12342d97ebedd191c344ea0d5e1e7646_icgraph" id="drivers_8h_a12342d97ebedd191c344ea0d5e1e7646_icgraph">
<area shape="rect" id="node2" href="sensor__fusion_8c.html#ab088da7731ffdf25710a364a7f88b224" title="This function is responsible for initializing the system prior to starting the main fusion loop..." alt="" coords="199,5,347,32"/>
<area shape="rect" id="node3" href="sensor__fusion_8h.html#a367d92b99365a8143700b76439915d65" title="utility function to insert default values in the top level structure " alt="" coords="395,5,557,32"/>
<area shape="rect" id="node4" href="main__agm01__freertos__two__tasks_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="605,5,656,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae65d7c74792e6da713e9b5a239475824"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ARM_systick_start_ticks </td>
          <td>(</td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>pstart</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__systick_8c_source.html#l00055">55</a> of file <a class="el" href="driver__systick_8c_source.html">driver_systick.c</a>.</p>

<p>Referenced by <a class="el" href="driver__systick_8c_source.html#l00075">ARM_systick_delay_ms()</a>, and <a class="el" href="fusion_8c_source.html#l00086">fFuseSensors()</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">// store the 24 bit systick timer</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    *pstart = <a class="code" href="driver__systick_8c.html#ae3dc4d2dbfdf38c593a5581415fecfed">SYST_CVR</a> &amp; 0x00FFFFFF;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div><div class="ttc" id="driver__systick_8c_html_ae3dc4d2dbfdf38c593a5581415fecfed"><div class="ttname"><a href="driver__systick_8c.html#ae3dc4d2dbfdf38c593a5581415fecfed">SYST_CVR</a></div><div class="ttdeci">#define SYST_CVR</div><div class="ttdef"><b>Definition:</b> <a href="driver__systick_8c_source.html#l00040">driver_systick.c:40</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_ae65d7c74792e6da713e9b5a239475824_icgraph.png" border="0" usemap="#drivers_8h_ae65d7c74792e6da713e9b5a239475824_icgraph" alt=""/></div>
<map name="drivers_8h_ae65d7c74792e6da713e9b5a239475824_icgraph" id="drivers_8h_ae65d7c74792e6da713e9b5a239475824_icgraph">
<area shape="rect" id="node2" href="drivers_8h.html#a52c4ad21a29460539f43e8781d9fcfbf" title="ARM_systick_delay_ms" alt="" coords="221,5,384,32"/>
<area shape="rect" id="node5" href="fusion_8h.html#aeb60375528d75ee9fec67a96916141ca" title="fFuseSensors" alt="" coords="251,56,354,83"/>
<area shape="rect" id="node3" href="sensor__fusion_8c.html#ab088da7731ffdf25710a364a7f88b224" title="This function is responsible for initializing the system prior to starting the main fusion loop..." alt="" coords="432,5,580,32"/>
<area shape="rect" id="node4" href="sensor__fusion_8h.html#a367d92b99365a8143700b76439915d65" title="utility function to insert default values in the top level structure " alt="" coords="628,31,791,57"/>
<area shape="rect" id="node6" href="sensor__fusion_8c.html#a8b90119fee979d0309cc923bf1fad543" title="runFusion the top level call that actually runs the sensor fusion. This is a utility function which m..." alt="" coords="467,56,545,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae77f08324a00fd69eaffa1e1c10bafb9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t FXAS21002_Idle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="main__freertos__agm02__power__cycling_8c_source.html#l00135">fusion_task()</a>.</p>

<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_ae77f08324a00fd69eaffa1e1c10bafb9_icgraph.png" border="0" usemap="#drivers_8h_ae77f08324a00fd69eaffa1e1c10bafb9_icgraph" alt=""/></div>
<map name="drivers_8h_ae77f08324a00fd69eaffa1e1c10bafb9_icgraph" id="drivers_8h_ae77f08324a00fd69eaffa1e1c10bafb9_icgraph">
<area shape="rect" id="node2" href="main__freertos__agm02__power__cycling_8c.html#a022f0b0afee40ef57a0ac6e6db65cab6" title="fusion_task" alt="" coords="171,31,259,57"/>
<area shape="rect" id="node3" href="main__freertos__agm02__power__cycling_8c.html#a9ca051aa77e17583aa5a85d5de5c199a" title="vApplicationTickHook" alt="" coords="307,5,452,32"/>
<area shape="rect" id="node4" href="main__freertos__agm02__power__cycling_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="354,56,405,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aba7e2b11087e48b339ecd8c2b1f4ae09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t FXAS21002_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="main__freertos__agm02__power__cycling_8c_source.html#l00135">fusion_task()</a>, and <a class="el" href="main__agm01__freertos__two__tasks_8c_source.html#l00072">main()</a>.</p>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_aba7e2b11087e48b339ecd8c2b1f4ae09_icgraph.png" border="0" usemap="#drivers_8h_aba7e2b11087e48b339ecd8c2b1f4ae09_icgraph" alt=""/></div>
<map name="drivers_8h_aba7e2b11087e48b339ecd8c2b1f4ae09_icgraph" id="drivers_8h_aba7e2b11087e48b339ecd8c2b1f4ae09_icgraph">
<area shape="rect" id="node2" href="main__freertos__agm02__power__cycling_8c.html#a022f0b0afee40ef57a0ac6e6db65cab6" title="fusion_task" alt="" coords="168,31,256,57"/>
<area shape="rect" id="node5" href="main__agm01__freertos__two__tasks_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="187,81,237,108"/>
<area shape="rect" id="node3" href="main__freertos__agm02__power__cycling_8c.html#a9ca051aa77e17583aa5a85d5de5c199a" title="vApplicationTickHook" alt="" coords="304,5,449,32"/>
<area shape="rect" id="node4" href="main__freertos__agm02__power__cycling_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="351,56,402,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a958f7496eb58d44950cffafcde9e3254"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t FXAS21002_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="main__agm01__freertos__two__tasks_8c_source.html#l00072">main()</a>.</p>

<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a958f7496eb58d44950cffafcde9e3254_icgraph.png" border="0" usemap="#drivers_8h_a958f7496eb58d44950cffafcde9e3254_icgraph" alt=""/></div>
<map name="drivers_8h_a958f7496eb58d44950cffafcde9e3254_icgraph" id="drivers_8h_a958f7496eb58d44950cffafcde9e3254_icgraph">
<area shape="rect" id="node2" href="main__agm01__freertos__two__tasks_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="180,5,231,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae3e6043a3095f596460dd5d98dd1cd19"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t FXLS8471Q_Idle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__FXLS8471Q_8c_source.html#l00234">234</a> of file <a class="el" href="driver__FXLS8471Q_8c_source.html">driver_FXLS8471Q.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;{</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    int32_t     status;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span>(sensor-&gt;<a class="code" href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">isInitialized</a> == <a class="code" href="standard__build_8h.html#a8f284d04ec459633d30dc85cf0a32a0d">F_USING_ACCEL</a>) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">if</span> (sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a> == <a class="code" href="sensor__fusion_8h.html#aedb0274e7d55732f16fd67bfec361d83">SPI_ADDR</a>) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            status = Sensor_SPI_Write(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, &amp;(sensor-&gt;<a class="code" href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">slaveParams</a>), <a class="code" href="driver__FXLS8471Q_8c.html#a2fc1b2292b8a7e6c313a16f25937eea7">FXLS8471Q_IDLE</a> );</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            status = Sensor_I2C_Write(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a>, <a class="code" href="driver__FXLS8471Q_8c.html#a2fc1b2292b8a7e6c313a16f25937eea7">FXLS8471Q_IDLE</a> );</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        sensor-&gt;<a class="code" href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">isInitialized</a> = 0;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        sfg-&gt;Accel.isEnabled = <span class="keyword">false</span>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">return</span> SENSOR_ERROR_INIT;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> status;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}<div class="ttc" id="structPhysicalSensor_html_aa7b3c47e2be4d604bc40157d590d09b2"><div class="ttname"><a href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">PhysicalSensor::bus_driver</a></div><div class="ttdeci">void * bus_driver</div><div class="ttdoc">should be of type (ARM_DRIVER_I2C* for I2C-based sensors, ARM_DRIVER_SPI* for SPI) ...</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00171">sensor_fusion.h:171</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a5ac5d34e6fa204911ab8492c20890341"><div class="ttname"><a href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">PhysicalSensor::slaveParams</a></div><div class="ttdeci">spiSlaveSpecificParams_t slaveParams</div><div class="ttdoc">SPI specific parameters. Not used for I2C. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00174">sensor_fusion.h:174</a></div></div>
<div class="ttc" id="sensor__fusion_8h_html_aedb0274e7d55732f16fd67bfec361d83"><div class="ttname"><a href="sensor__fusion_8h.html#aedb0274e7d55732f16fd67bfec361d83">SPI_ADDR</a></div><div class="ttdeci">#define SPI_ADDR</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00153">sensor_fusion.h:153</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a87223885ad859bb82fdc45644bc1f0b2"><div class="ttname"><a href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">PhysicalSensor::isInitialized</a></div><div class="ttdeci">uint16_t isInitialized</div><div class="ttdoc">Bitfields to indicate sensor is active (use SensorBitFields from build.h) </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00173">sensor_fusion.h:173</a></div></div>
<div class="ttc" id="standard__build_8h_html_a8f284d04ec459633d30dc85cf0a32a0d"><div class="ttname"><a href="standard__build_8h.html#a8f284d04ec459633d30dc85cf0a32a0d">F_USING_ACCEL</a></div><div class="ttdeci">#define F_USING_ACCEL</div><div class="ttdoc">nominally 0x0001 if an accelerometer is to be used, 0x0000 otherwise </div><div class="ttdef"><b>Definition:</b> <a href="standard__build_8h_source.html#l00055">standard_build.h:55</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a41a6aad09727eb120338c35535a652a6"><div class="ttname"><a href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">PhysicalSensor::addr</a></div><div class="ttdeci">uint16_t addr</div><div class="ttdoc">I2C address if applicable. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00172">sensor_fusion.h:172</a></div></div>
<div class="ttc" id="driver__FXLS8471Q_8c_html_a2fc1b2292b8a7e6c313a16f25937eea7"><div class="ttname"><a href="driver__FXLS8471Q_8c.html#a2fc1b2292b8a7e6c313a16f25937eea7">FXLS8471Q_IDLE</a></div><div class="ttdeci">const registerwritelist_t FXLS8471Q_IDLE[]</div><div class="ttdef"><b>Definition:</b> <a href="driver__FXLS8471Q_8c_source.html#l00226">driver_FXLS8471Q.c:226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a562362f122065dbadacd859672964596"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t FXLS8471Q_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__FXLS8471Q_8c_source.html#l00135">135</a> of file <a class="el" href="driver__FXLS8471Q_8c_source.html">driver_FXLS8471Q.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    GENERIC_DRIVER_GPIO *pGPIODriver = &amp;Driver_GPIO_KSDK;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    int32_t status;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    uint8_t reg;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a> == <a class="code" href="sensor__fusion_8h.html#aedb0274e7d55732f16fd67bfec361d83">SPI_ADDR</a>) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="comment">// Initialize the Slave Select Pin.</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        pGPIODriver-&gt;pin_init(&amp;FXLS8471_SPI_CS, GPIO_DIRECTION_OUT, NULL, NULL, NULL);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="comment">// Initialize SPI parameters used by ISSDK SPI routines</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        sensor-&gt;<a class="code" href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">slaveParams</a>.pReadPreprocessFN  = FXLS8471Q_SPI_ReadPreprocess;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        sensor-&gt;<a class="code" href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">slaveParams</a>.pWritePreprocessFN = FXLS8471Q_SPI_WritePreprocess;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        sensor-&gt;<a class="code" href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">slaveParams</a>.pTargetSlavePinID = &amp;FXLS8471_SPI_CS;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        sensor-&gt;<a class="code" href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">slaveParams</a>.spiCmdLen = FXLS8471Q_SPI_CMD_LEN;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        sensor-&gt;<a class="code" href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">slaveParams</a>.ssActiveValue = FXLS8471Q_SS_ACTIVE_VALUE;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="comment">// Read the WhoAmI</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        status = Register_SPI_Read(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, &amp;(sensor-&gt;<a class="code" href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">slaveParams</a>), FXLS8471Q_WHO_AM_I, 1, &amp;reg);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        status = Register_I2C_Read(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a>, FXLS8471Q_WHO_AM_I, 1, &amp;reg);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">if</span> (status==SENSOR_ERROR_NONE) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        sfg-&gt;Accel.iWhoAmI = reg;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">if</span> (reg!=FXLS8471Q_WHO_AM_I_WHOAMI_VALUE) <span class="keywordflow">return</span>(SENSOR_ERROR_INIT);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;       <span class="keywordflow">return</span>(status);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// Configure and start the FXLS8471Q sensor.  This does multiple register writes</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a> == <a class="code" href="sensor__fusion_8h.html#aedb0274e7d55732f16fd67bfec361d83">SPI_ADDR</a>)</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        status = Sensor_SPI_Write(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, &amp;(sensor-&gt;<a class="code" href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">slaveParams</a>), <a class="code" href="driver__FXLS8471Q_8c.html#a5ee03e031e9da54109eb632c4982a9ee">FXLS8471Q_Initialization</a> );</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        status = Sensor_I2C_Write(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a>, <a class="code" href="driver__FXLS8471Q_8c.html#a5ee03e031e9da54109eb632c4982a9ee">FXLS8471Q_Initialization</a> );</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// Stash some needed constants in the SF data structure for this sensor</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    sfg-&gt;Accel.iCountsPerg = <a class="code" href="driver__FXLS8471Q_8c.html#add3ef91902526b46454184e9caf17f81">FXLS8471Q_COUNTSPERG</a>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    sfg-&gt;Accel.fgPerCount = 1.0F / <a class="code" href="driver__FXLS8471Q_8c.html#add3ef91902526b46454184e9caf17f81">FXLS8471Q_COUNTSPERG</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    sensor-&gt;<a class="code" href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">isInitialized</a> = <a class="code" href="standard__build_8h.html#a8f284d04ec459633d30dc85cf0a32a0d">F_USING_ACCEL</a>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    sfg-&gt;Accel.isEnabled = <span class="keyword">true</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> (status);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div><div class="ttc" id="driver__FXLS8471Q_8c_html_add3ef91902526b46454184e9caf17f81"><div class="ttname"><a href="driver__FXLS8471Q_8c.html#add3ef91902526b46454184e9caf17f81">FXLS8471Q_COUNTSPERG</a></div><div class="ttdeci">#define FXLS8471Q_COUNTSPERG</div><div class="ttdef"><b>Definition:</b> <a href="driver__FXLS8471Q_8c_source.html#l00046">driver_FXLS8471Q.c:46</a></div></div>
<div class="ttc" id="driver__FXLS8471Q_8c_html_a5ee03e031e9da54109eb632c4982a9ee"><div class="ttname"><a href="driver__FXLS8471Q_8c.html#a5ee03e031e9da54109eb632c4982a9ee">FXLS8471Q_Initialization</a></div><div class="ttdeci">const registerwritelist_t FXLS8471Q_Initialization[]</div><div class="ttdef"><b>Definition:</b> <a href="driver__FXLS8471Q_8c_source.html#l00068">driver_FXLS8471Q.c:68</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_aa7b3c47e2be4d604bc40157d590d09b2"><div class="ttname"><a href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">PhysicalSensor::bus_driver</a></div><div class="ttdeci">void * bus_driver</div><div class="ttdoc">should be of type (ARM_DRIVER_I2C* for I2C-based sensors, ARM_DRIVER_SPI* for SPI) ...</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00171">sensor_fusion.h:171</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a5ac5d34e6fa204911ab8492c20890341"><div class="ttname"><a href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">PhysicalSensor::slaveParams</a></div><div class="ttdeci">spiSlaveSpecificParams_t slaveParams</div><div class="ttdoc">SPI specific parameters. Not used for I2C. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00174">sensor_fusion.h:174</a></div></div>
<div class="ttc" id="sensor__fusion_8h_html_aedb0274e7d55732f16fd67bfec361d83"><div class="ttname"><a href="sensor__fusion_8h.html#aedb0274e7d55732f16fd67bfec361d83">SPI_ADDR</a></div><div class="ttdeci">#define SPI_ADDR</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00153">sensor_fusion.h:153</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a87223885ad859bb82fdc45644bc1f0b2"><div class="ttname"><a href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">PhysicalSensor::isInitialized</a></div><div class="ttdeci">uint16_t isInitialized</div><div class="ttdoc">Bitfields to indicate sensor is active (use SensorBitFields from build.h) </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00173">sensor_fusion.h:173</a></div></div>
<div class="ttc" id="standard__build_8h_html_a8f284d04ec459633d30dc85cf0a32a0d"><div class="ttname"><a href="standard__build_8h.html#a8f284d04ec459633d30dc85cf0a32a0d">F_USING_ACCEL</a></div><div class="ttdeci">#define F_USING_ACCEL</div><div class="ttdoc">nominally 0x0001 if an accelerometer is to be used, 0x0000 otherwise </div><div class="ttdef"><b>Definition:</b> <a href="standard__build_8h_source.html#l00055">standard_build.h:55</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a41a6aad09727eb120338c35535a652a6"><div class="ttname"><a href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">PhysicalSensor::addr</a></div><div class="ttdeci">uint16_t addr</div><div class="ttdoc">I2C address if applicable. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00172">sensor_fusion.h:172</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a33189bcbbd5761f2b9b5032fd499e0ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t FXLS8471Q_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__FXLS8471Q_8c_source.html#l00177">177</a> of file <a class="el" href="driver__FXLS8471Q_8c_source.html">driver_FXLS8471Q.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    uint8_t                     Data_Buffer[6 * <a class="code" href="driver__FXLS8471Q_8c.html#acf497ea8a5db51068e208102a09f6edf">FXLS8471Q_ACCEL_FIFO_SIZE</a>];    <span class="comment">// I2C read buffer</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    int8_t                      status=0;       <span class="comment">// I2C transaction status</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    int8_t                      j;              <span class="comment">// scratch</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    uint16_t                     sensor_fifo_count = 1;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    int16_t                     sample[3];</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span>(sensor-&gt;<a class="code" href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">isInitialized</a> != <a class="code" href="standard__build_8h.html#a8f284d04ec459633d30dc85cf0a32a0d">F_USING_ACCEL</a>)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">return</span> SENSOR_ERROR_INIT;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">// read the F_STATUS register (mapped to STATUS) and extract number of measurements available (lower 6 bits)</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a> == <a class="code" href="sensor__fusion_8h.html#aedb0274e7d55732f16fd67bfec361d83">SPI_ADDR</a>)</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        status =  Sensor_SPI_Read(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, &amp;(sensor-&gt;<a class="code" href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">slaveParams</a>), <a class="code" href="driver__FXLS8471Q_8c.html#abed08ce6b0ec2cd90648fb8c0e673a6d">FXLS8471Q_F_STATUS_READ</a>, Data_Buffer );</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        status =  Sensor_I2C_Read(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a>, <a class="code" href="driver__FXLS8471Q_8c.html#abed08ce6b0ec2cd90648fb8c0e673a6d">FXLS8471Q_F_STATUS_READ</a>, Data_Buffer );</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    sensor_fifo_count = Data_Buffer[0] &amp; 0x3F;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (status==SENSOR_ERROR_NONE) {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">// return if there are no measurements in the sensor FIFO.</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">// this will only occur when the FAST_LOOP_HZ equals or exceeds ACCEL_ODR_HZ</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">if</span>  (sensor_fifo_count == 0) <span class="keywordflow">return</span> SENSOR_ERROR_READ;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">return</span>(status);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="driver__FXLS8471Q_8c.html#af83de7980f4bc0288f56e874bf750bfd">FXLS8471Q_DATA_READ</a>-&gt;numBytes = 6 * sensor_fifo_count;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span> (sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a> == <a class="code" href="sensor__fusion_8h.html#aedb0274e7d55732f16fd67bfec361d83">SPI_ADDR</a>)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        status =  Sensor_SPI_Read(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, &amp;sensor-&gt;<a class="code" href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">slaveParams</a>, <a class="code" href="driver__FXLS8471Q_8c.html#af83de7980f4bc0288f56e874bf750bfd">FXLS8471Q_DATA_READ</a>, &amp;(Data_Buffer[0]) );</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        status =  Sensor_I2C_Read(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a>, <a class="code" href="driver__FXLS8471Q_8c.html#af83de7980f4bc0288f56e874bf750bfd">FXLS8471Q_DATA_READ</a>, &amp;(Data_Buffer[0]) );</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span> (status==SENSOR_ERROR_NONE) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">for</span> (j=0; j&lt;sensor_fifo_count; j++) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            sample[<a class="code" href="sensor__fusion_8h.html#a48bbd27e913de8d7749dff9dec2fe816">CHX</a>] = (Data_Buffer[6*j    ] &lt;&lt; 8) | Data_Buffer[6*j + 1] ;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            sample[<a class="code" href="sensor__fusion_8h.html#a6a25024f52cc6bea13d19f8b68456cea">CHY</a>] = (Data_Buffer[6*j + 2] &lt;&lt; 8) | Data_Buffer[6*j + 3] ;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            sample[<a class="code" href="sensor__fusion_8h.html#a76143891435bdd7248857e45b93521ed">CHZ</a>] = (Data_Buffer[6*j + 4] &lt;&lt; 8) | Data_Buffer[6*j + 5] ;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <a class="code" href="sensor__fusion_8c.html#a2686eeb8ae44e588362478db1f757a0e">conditionSample</a>(sample);  <span class="comment">// truncate negative values to -32767</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <a class="code" href="sensor__fusion_8c.html#aaed8e08f6d3e766cdf1314193f6b124a">addToFifo</a>((<a class="code" href="unionFifoSensor.html">FifoSensor</a>*) &amp;(sfg-&gt;Accel), <a class="code" href="standard__build_8h.html#a4c185218ef46ba2991d62b28e1620539">ACCEL_FIFO_SIZE</a>, sample);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">return</span> (status);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div><div class="ttc" id="sensor__fusion_8h_html_a6a25024f52cc6bea13d19f8b68456cea"><div class="ttname"><a href="sensor__fusion_8h.html#a6a25024f52cc6bea13d19f8b68456cea">CHY</a></div><div class="ttdeci">#define CHY</div><div class="ttdoc">Used to access Y-channel entries in various data data structures. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00077">sensor_fusion.h:77</a></div></div>
<div class="ttc" id="sensor__fusion_8c_html_aaed8e08f6d3e766cdf1314193f6b124a"><div class="ttname"><a href="sensor__fusion_8c.html#aaed8e08f6d3e766cdf1314193f6b124a">addToFifo</a></div><div class="ttdeci">void addToFifo(FifoSensor *sensor, uint16_t maxFifoSize, int16_t sample[3])</div><div class="ttdoc">addToFifo is called from within sensor driver read functions </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8c_source.html#l00531">sensor_fusion.c:531</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_aa7b3c47e2be4d604bc40157d590d09b2"><div class="ttname"><a href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">PhysicalSensor::bus_driver</a></div><div class="ttdeci">void * bus_driver</div><div class="ttdoc">should be of type (ARM_DRIVER_I2C* for I2C-based sensors, ARM_DRIVER_SPI* for SPI) ...</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00171">sensor_fusion.h:171</a></div></div>
<div class="ttc" id="standard__build_8h_html_a4c185218ef46ba2991d62b28e1620539"><div class="ttname"><a href="standard__build_8h.html#a4c185218ef46ba2991d62b28e1620539">ACCEL_FIFO_SIZE</a></div><div class="ttdeci">#define ACCEL_FIFO_SIZE</div><div class="ttdoc">FXOS8700 (accel), MMA8652, FXLS8952 all have 32 element FIFO. </div><div class="ttdef"><b>Definition:</b> <a href="standard__build_8h_source.html#l00079">standard_build.h:79</a></div></div>
<div class="ttc" id="unionFifoSensor_html"><div class="ttname"><a href="unionFifoSensor.html">FifoSensor</a></div><div class="ttdoc">The FifoSensor union allows us to use common pointers for Accel, Mag &amp; Gyro logical sensor structures...</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00266">sensor_fusion.h:266</a></div></div>
<div class="ttc" id="driver__FXLS8471Q_8c_html_acf497ea8a5db51068e208102a09f6edf"><div class="ttname"><a href="driver__FXLS8471Q_8c.html#acf497ea8a5db51068e208102a09f6edf">FXLS8471Q_ACCEL_FIFO_SIZE</a></div><div class="ttdeci">#define FXLS8471Q_ACCEL_FIFO_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="driver__FXLS8471Q_8c_source.html#l00047">driver_FXLS8471Q.c:47</a></div></div>
<div class="ttc" id="sensor__fusion_8h_html_a76143891435bdd7248857e45b93521ed"><div class="ttname"><a href="sensor__fusion_8h.html#a76143891435bdd7248857e45b93521ed">CHZ</a></div><div class="ttdeci">#define CHZ</div></div>
<div class="ttc" id="structPhysicalSensor_html_a5ac5d34e6fa204911ab8492c20890341"><div class="ttname"><a href="structPhysicalSensor.html#a5ac5d34e6fa204911ab8492c20890341">PhysicalSensor::slaveParams</a></div><div class="ttdeci">spiSlaveSpecificParams_t slaveParams</div><div class="ttdoc">SPI specific parameters. Not used for I2C. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00174">sensor_fusion.h:174</a></div></div>
<div class="ttc" id="sensor__fusion_8h_html_aedb0274e7d55732f16fd67bfec361d83"><div class="ttname"><a href="sensor__fusion_8h.html#aedb0274e7d55732f16fd67bfec361d83">SPI_ADDR</a></div><div class="ttdeci">#define SPI_ADDR</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00153">sensor_fusion.h:153</a></div></div>
<div class="ttc" id="sensor__fusion_8h_html_a48bbd27e913de8d7749dff9dec2fe816"><div class="ttname"><a href="sensor__fusion_8h.html#a48bbd27e913de8d7749dff9dec2fe816">CHX</a></div><div class="ttdeci">#define CHX</div><div class="ttdoc">Used to access X-channel entries in various data data structures. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00076">sensor_fusion.h:76</a></div></div>
<div class="ttc" id="sensor__fusion_8c_html_a2686eeb8ae44e588362478db1f757a0e"><div class="ttname"><a href="sensor__fusion_8c.html#a2686eeb8ae44e588362478db1f757a0e">conditionSample</a></div><div class="ttdeci">void conditionSample(int16_t sample[3])</div><div class="ttdoc">conditionSample ensures that we never encounter the maximum negative two&amp;#39;s complement value for a 16-...</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8c_source.html#l00519">sensor_fusion.c:519</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a87223885ad859bb82fdc45644bc1f0b2"><div class="ttname"><a href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">PhysicalSensor::isInitialized</a></div><div class="ttdeci">uint16_t isInitialized</div><div class="ttdoc">Bitfields to indicate sensor is active (use SensorBitFields from build.h) </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00173">sensor_fusion.h:173</a></div></div>
<div class="ttc" id="driver__FXLS8471Q_8c_html_abed08ce6b0ec2cd90648fb8c0e673a6d"><div class="ttname"><a href="driver__FXLS8471Q_8c.html#abed08ce6b0ec2cd90648fb8c0e673a6d">FXLS8471Q_F_STATUS_READ</a></div><div class="ttdeci">const registerreadlist_t FXLS8471Q_F_STATUS_READ[]</div><div class="ttdef"><b>Definition:</b> <a href="driver__FXLS8471Q_8c_source.html#l00056">driver_FXLS8471Q.c:56</a></div></div>
<div class="ttc" id="standard__build_8h_html_a8f284d04ec459633d30dc85cf0a32a0d"><div class="ttname"><a href="standard__build_8h.html#a8f284d04ec459633d30dc85cf0a32a0d">F_USING_ACCEL</a></div><div class="ttdeci">#define F_USING_ACCEL</div><div class="ttdoc">nominally 0x0001 if an accelerometer is to be used, 0x0000 otherwise </div><div class="ttdef"><b>Definition:</b> <a href="standard__build_8h_source.html#l00055">standard_build.h:55</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a41a6aad09727eb120338c35535a652a6"><div class="ttname"><a href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">PhysicalSensor::addr</a></div><div class="ttdeci">uint16_t addr</div><div class="ttdoc">I2C address if applicable. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00172">sensor_fusion.h:172</a></div></div>
<div class="ttc" id="driver__FXLS8471Q_8c_html_af83de7980f4bc0288f56e874bf750bfd"><div class="ttname"><a href="driver__FXLS8471Q_8c.html#af83de7980f4bc0288f56e874bf750bfd">FXLS8471Q_DATA_READ</a></div><div class="ttdeci">registerreadlist_t FXLS8471Q_DATA_READ[]</div><div class="ttdef"><b>Definition:</b> <a href="driver__FXLS8471Q_8c_source.html#l00062">driver_FXLS8471Q.c:62</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a33189bcbbd5761f2b9b5032fd499e0ea_cgraph.png" border="0" usemap="#drivers_8h_a33189bcbbd5761f2b9b5032fd499e0ea_cgraph" alt=""/></div>
<map name="drivers_8h_a33189bcbbd5761f2b9b5032fd499e0ea_cgraph" id="drivers_8h_a33189bcbbd5761f2b9b5032fd499e0ea_cgraph">
<area shape="rect" id="node2" href="sensor__fusion_8c.html#a2686eeb8ae44e588362478db1f757a0e" title="conditionSample ensures that we never encounter the maximum negative two&#39;s complement value for a 16&#45;..." alt="" coords="181,5,300,32"/>
<area shape="rect" id="node3" href="sensor__fusion_8c.html#aaed8e08f6d3e766cdf1314193f6b124a" title="addToFifo is called from within sensor driver read functions " alt="" coords="201,56,280,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af17182ffce5beb911d03551e43158164"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t FXLS8952_Idle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a57bee86d9c17a5bfffd019bef488fce3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t FXLS8952_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="main__freertos__agm02_8c_source.html#l00072">main()</a>.</p>

<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a57bee86d9c17a5bfffd019bef488fce3_icgraph.png" border="0" usemap="#drivers_8h_a57bee86d9c17a5bfffd019bef488fce3_icgraph" alt=""/></div>
<map name="drivers_8h_a57bee86d9c17a5bfffd019bef488fce3_icgraph" id="drivers_8h_a57bee86d9c17a5bfffd019bef488fce3_icgraph">
<area shape="rect" id="node2" href="main__freertos__agm02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="159,5,209,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a360a222d07c3ea98c12a75bb1f5a8993"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t FXLS8952_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="main__freertos__agm02_8c_source.html#l00072">main()</a>.</p>

<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a360a222d07c3ea98c12a75bb1f5a8993_icgraph.png" border="0" usemap="#drivers_8h_a360a222d07c3ea98c12a75bb1f5a8993_icgraph" alt=""/></div>
<map name="drivers_8h_a360a222d07c3ea98c12a75bb1f5a8993_icgraph" id="drivers_8h_a360a222d07c3ea98c12a75bb1f5a8993_icgraph">
<area shape="rect" id="node2" href="main__freertos__agm02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="172,5,223,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a81eb6639a3336411c9c255f1db98ea7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t FXOS8700_Idle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__FXOS8700_8c_source.html#l00296">296</a> of file <a class="el" href="driver__FXOS8700_8c_source.html">driver_FXOS8700.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;{</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    int32_t     status;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span>(sensor-&gt;<a class="code" href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">isInitialized</a> == (<a class="code" href="standard__build_8h.html#a8f284d04ec459633d30dc85cf0a32a0d">F_USING_ACCEL</a>|<a class="code" href="magnetic_8h.html#a78765407e471fe0b9119e5ff41aa7d16">F_USING_MAG</a>)) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        status = Sensor_I2C_Write(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a>, <a class="code" href="driver__FXOS8700_8c.html#ab35eff335189522162903b9d1d084b13">FXOS8700_FULL_IDLE</a> );</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        sensor-&gt;<a class="code" href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">isInitialized</a> = 0;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">#if F_USING_ACCEL</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        sfg-&gt;Accel.isEnabled = <span class="keyword">false</span>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="preprocessor">#if F_USING_MAG</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>.<a class="code" href="structMagSensor.html#aaa521633aa149ccf8d2eab52b4a2abe0">isEnabled</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">return</span> SENSOR_ERROR_INIT;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> status;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div><div class="ttc" id="driver__FXOS8700_8c_html_ab35eff335189522162903b9d1d084b13"><div class="ttname"><a href="driver__FXOS8700_8c.html#ab35eff335189522162903b9d1d084b13">FXOS8700_FULL_IDLE</a></div><div class="ttdeci">const registerwritelist_t FXOS8700_FULL_IDLE[]</div><div class="ttdef"><b>Definition:</b> <a href="driver__FXOS8700_8c_source.html#l00284">driver_FXOS8700.c:284</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_aa7b3c47e2be4d604bc40157d590d09b2"><div class="ttname"><a href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">PhysicalSensor::bus_driver</a></div><div class="ttdeci">void * bus_driver</div><div class="ttdoc">should be of type (ARM_DRIVER_I2C* for I2C-based sensors, ARM_DRIVER_SPI* for SPI) ...</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00171">sensor_fusion.h:171</a></div></div>
<div class="ttc" id="structSensorFusionGlobals_html_a876af8fddc05153d04bda2d8a8107819"><div class="ttname"><a href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">SensorFusionGlobals::Mag</a></div><div class="ttdeci">MagSensor Mag</div><div class="ttdoc">magnetometer storage </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00492">sensor_fusion.h:492</a></div></div>
<div class="ttc" id="structMagSensor_html_aaa521633aa149ccf8d2eab52b4a2abe0"><div class="ttname"><a href="structMagSensor.html#aaa521633aa149ccf8d2eab52b4a2abe0">MagSensor::isEnabled</a></div><div class="ttdeci">bool isEnabled</div><div class="ttdoc">true if the device is sampling </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00230">sensor_fusion.h:230</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a87223885ad859bb82fdc45644bc1f0b2"><div class="ttname"><a href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">PhysicalSensor::isInitialized</a></div><div class="ttdeci">uint16_t isInitialized</div><div class="ttdoc">Bitfields to indicate sensor is active (use SensorBitFields from build.h) </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00173">sensor_fusion.h:173</a></div></div>
<div class="ttc" id="standard__build_8h_html_a8f284d04ec459633d30dc85cf0a32a0d"><div class="ttname"><a href="standard__build_8h.html#a8f284d04ec459633d30dc85cf0a32a0d">F_USING_ACCEL</a></div><div class="ttdeci">#define F_USING_ACCEL</div><div class="ttdoc">nominally 0x0001 if an accelerometer is to be used, 0x0000 otherwise </div><div class="ttdef"><b>Definition:</b> <a href="standard__build_8h_source.html#l00055">standard_build.h:55</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a41a6aad09727eb120338c35535a652a6"><div class="ttname"><a href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">PhysicalSensor::addr</a></div><div class="ttdeci">uint16_t addr</div><div class="ttdoc">I2C address if applicable. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00172">sensor_fusion.h:172</a></div></div>
<div class="ttc" id="magnetic_8h_html_a78765407e471fe0b9119e5ff41aa7d16"><div class="ttname"><a href="magnetic_8h.html#a78765407e471fe0b9119e5ff41aa7d16">F_USING_MAG</a></div><div class="ttdeci">#define F_USING_MAG</div><div class="ttdef"><b>Definition:</b> <a href="magnetic_8h_source.html#l00038">magnetic.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a905984cc5f2e42228183217f6d071fb8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t FXOS8700_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__FXOS8700_8c_source.html#l00151">151</a> of file <a class="el" href="driver__FXOS8700_8c_source.html">driver_FXOS8700.c</a>.</p>

<p>Referenced by <a class="el" href="main__agm01__freertos__two__tasks_8c_source.html#l00072">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    int32_t status;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    uint8_t reg;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    status = Register_I2C_Read(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a>, FXOS8700_WHO_AM_I, 1, &amp;reg);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (status==SENSOR_ERROR_NONE) {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#if F_USING_ACCEL</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;       sfg-&gt;Accel.iWhoAmI = reg;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;       sfg-&gt;Accel.iCountsPerg = <a class="code" href="driver__FXOS8700_8c.html#aba2d125a7c20d788b7f6931afdab3e80">FXOS8700_COUNTSPERG</a>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;       sfg-&gt;Accel.fgPerCount = 1.0F / <a class="code" href="driver__FXOS8700_8c.html#aba2d125a7c20d788b7f6931afdab3e80">FXOS8700_COUNTSPERG</a>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#if F_USING_MAG</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;       sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>.<a class="code" href="structMagSensor.html#a895f3236864f6fe000df494c55c112fb">iWhoAmI</a> = reg;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;       sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>.<a class="code" href="structMagSensor.html#a8d14850aea4f6f78343db74f3208f5d0">iCountsPeruT</a> = <a class="code" href="driver__FXOS8700_8c.html#aafab1912835ff90c989e1c35ddc8bb77">FXOS8700_COUNTSPERUT</a>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;       sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>.<a class="code" href="structMagSensor.html#ac3901ffb470c673ebef71c65f475976f">fCountsPeruT</a> = (float) <a class="code" href="driver__FXOS8700_8c.html#aafab1912835ff90c989e1c35ddc8bb77">FXOS8700_COUNTSPERUT</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;       sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>.<a class="code" href="structMagSensor.html#a2caa6d9b17dec76fd4b56dc2e81becbd">fuTPerCount</a> = 1.0F / <a class="code" href="driver__FXOS8700_8c.html#aafab1912835ff90c989e1c35ddc8bb77">FXOS8700_COUNTSPERUT</a>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;       <span class="keywordflow">if</span> (reg != FXOS8700_WHO_AM_I_PROD_VALUE) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;          <span class="keywordflow">return</span> SENSOR_ERROR_INIT;  <span class="comment">// The whoAmI did not match</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;       }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">// whoAmI will rettain default value of zero</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="comment">// return with error</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">return</span> status;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// Configure and start the fxos8700 sensor.  This does multiple register writes</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">// (see FXOS8700_Initialization definition above)</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    status = Sensor_I2C_Write(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a>, <a class="code" href="driver__FXOS8700_8c.html#a59fd78ede6955ecb2f9e32387342bedd">FXOS8700_Initialization</a> );</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    sensor-&gt;<a class="code" href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">isInitialized</a> = <a class="code" href="standard__build_8h.html#a8f284d04ec459633d30dc85cf0a32a0d">F_USING_ACCEL</a> | <a class="code" href="magnetic_8h.html#a78765407e471fe0b9119e5ff41aa7d16">F_USING_MAG</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#if F_USING_ACCEL</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    sfg-&gt;Accel.isEnabled = <span class="keyword">true</span>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">#if F_USING_MAG</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>.<a class="code" href="structMagSensor.html#aaa521633aa149ccf8d2eab52b4a2abe0">isEnabled</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">return</span> (status);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div><div class="ttc" id="driver__FXOS8700_8c_html_aafab1912835ff90c989e1c35ddc8bb77"><div class="ttname"><a href="driver__FXOS8700_8c.html#aafab1912835ff90c989e1c35ddc8bb77">FXOS8700_COUNTSPERUT</a></div><div class="ttdeci">#define FXOS8700_COUNTSPERUT</div><div class="ttdef"><b>Definition:</b> <a href="driver__FXOS8700_8c_source.html#l00145">driver_FXOS8700.c:145</a></div></div>
<div class="ttc" id="driver__FXOS8700_8c_html_aba2d125a7c20d788b7f6931afdab3e80"><div class="ttname"><a href="driver__FXOS8700_8c.html#aba2d125a7c20d788b7f6931afdab3e80">FXOS8700_COUNTSPERG</a></div><div class="ttdeci">#define FXOS8700_COUNTSPERG</div><div class="ttdef"><b>Definition:</b> <a href="driver__FXOS8700_8c_source.html#l00144">driver_FXOS8700.c:144</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_aa7b3c47e2be4d604bc40157d590d09b2"><div class="ttname"><a href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">PhysicalSensor::bus_driver</a></div><div class="ttdeci">void * bus_driver</div><div class="ttdoc">should be of type (ARM_DRIVER_I2C* for I2C-based sensors, ARM_DRIVER_SPI* for SPI) ...</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00171">sensor_fusion.h:171</a></div></div>
<div class="ttc" id="structMagSensor_html_a8d14850aea4f6f78343db74f3208f5d0"><div class="ttname"><a href="structMagSensor.html#a8d14850aea4f6f78343db74f3208f5d0">MagSensor::iCountsPeruT</a></div><div class="ttdeci">int16_t iCountsPeruT</div><div class="ttdoc">counts per uT </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00241">sensor_fusion.h:241</a></div></div>
<div class="ttc" id="structSensorFusionGlobals_html_a876af8fddc05153d04bda2d8a8107819"><div class="ttname"><a href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">SensorFusionGlobals::Mag</a></div><div class="ttdeci">MagSensor Mag</div><div class="ttdoc">magnetometer storage </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00492">sensor_fusion.h:492</a></div></div>
<div class="ttc" id="structMagSensor_html_a2caa6d9b17dec76fd4b56dc2e81becbd"><div class="ttname"><a href="structMagSensor.html#a2caa6d9b17dec76fd4b56dc2e81becbd">MagSensor::fuTPerCount</a></div><div class="ttdeci">float fuTPerCount</div><div class="ttdoc">uT per count </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00237">sensor_fusion.h:237</a></div></div>
<div class="ttc" id="structMagSensor_html_aaa521633aa149ccf8d2eab52b4a2abe0"><div class="ttname"><a href="structMagSensor.html#aaa521633aa149ccf8d2eab52b4a2abe0">MagSensor::isEnabled</a></div><div class="ttdeci">bool isEnabled</div><div class="ttdoc">true if the device is sampling </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00230">sensor_fusion.h:230</a></div></div>
<div class="ttc" id="driver__FXOS8700_8c_html_a59fd78ede6955ecb2f9e32387342bedd"><div class="ttname"><a href="driver__FXOS8700_8c.html#a59fd78ede6955ecb2f9e32387342bedd">FXOS8700_Initialization</a></div><div class="ttdeci">const registerwritelist_t FXOS8700_Initialization[]</div><div class="ttdef"><b>Definition:</b> <a href="driver__FXOS8700_8c_source.html#l00064">driver_FXOS8700.c:64</a></div></div>
<div class="ttc" id="structMagSensor_html_ac3901ffb470c673ebef71c65f475976f"><div class="ttname"><a href="structMagSensor.html#ac3901ffb470c673ebef71c65f475976f">MagSensor::fCountsPeruT</a></div><div class="ttdeci">float fCountsPeruT</div><div class="ttdoc">counts per uT </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00238">sensor_fusion.h:238</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a87223885ad859bb82fdc45644bc1f0b2"><div class="ttname"><a href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">PhysicalSensor::isInitialized</a></div><div class="ttdeci">uint16_t isInitialized</div><div class="ttdoc">Bitfields to indicate sensor is active (use SensorBitFields from build.h) </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00173">sensor_fusion.h:173</a></div></div>
<div class="ttc" id="structMagSensor_html_a895f3236864f6fe000df494c55c112fb"><div class="ttname"><a href="structMagSensor.html#a895f3236864f6fe000df494c55c112fb">MagSensor::iWhoAmI</a></div><div class="ttdeci">uint8_t iWhoAmI</div><div class="ttdoc">sensor whoami </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00229">sensor_fusion.h:229</a></div></div>
<div class="ttc" id="standard__build_8h_html_a8f284d04ec459633d30dc85cf0a32a0d"><div class="ttname"><a href="standard__build_8h.html#a8f284d04ec459633d30dc85cf0a32a0d">F_USING_ACCEL</a></div><div class="ttdeci">#define F_USING_ACCEL</div><div class="ttdoc">nominally 0x0001 if an accelerometer is to be used, 0x0000 otherwise </div><div class="ttdef"><b>Definition:</b> <a href="standard__build_8h_source.html#l00055">standard_build.h:55</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a41a6aad09727eb120338c35535a652a6"><div class="ttname"><a href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">PhysicalSensor::addr</a></div><div class="ttdeci">uint16_t addr</div><div class="ttdoc">I2C address if applicable. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00172">sensor_fusion.h:172</a></div></div>
<div class="ttc" id="magnetic_8h_html_a78765407e471fe0b9119e5ff41aa7d16"><div class="ttname"><a href="magnetic_8h.html#a78765407e471fe0b9119e5ff41aa7d16">F_USING_MAG</a></div><div class="ttdeci">#define F_USING_MAG</div><div class="ttdef"><b>Definition:</b> <a href="magnetic_8h_source.html#l00038">magnetic.h:38</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a905984cc5f2e42228183217f6d071fb8_cgraph.png" border="0" usemap="#drivers_8h_a905984cc5f2e42228183217f6d071fb8_cgraph" alt=""/></div>
<map name="drivers_8h_a905984cc5f2e42228183217f6d071fb8_cgraph" id="drivers_8h_a905984cc5f2e42228183217f6d071fb8_cgraph">
<area shape="rect" id="node2" href="sensor__fusion_8c.html#a2686eeb8ae44e588362478db1f757a0e" title="conditionSample ensures that we never encounter the maximum negative two&#39;s complement value for a 16&#45;..." alt="" coords="161,5,280,32"/>
<area shape="rect" id="node3" href="sensor__fusion_8c.html#aaed8e08f6d3e766cdf1314193f6b124a" title="addToFifo is called from within sensor driver read functions " alt="" coords="181,56,260,83"/>
</map>
</div>
</p>

<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a905984cc5f2e42228183217f6d071fb8_icgraph.png" border="0" usemap="#drivers_8h_a905984cc5f2e42228183217f6d071fb8_icgraph" alt=""/></div>
<map name="drivers_8h_a905984cc5f2e42228183217f6d071fb8_icgraph" id="drivers_8h_a905984cc5f2e42228183217f6d071fb8_icgraph">
<area shape="rect" id="node2" href="main__agm01__freertos__two__tasks_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="161,5,212,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a15f78e72d6a7dec25d95d97fa4c8d00e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t FXOS8700_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__FXOS8700_8c_source.html#l00265">265</a> of file <a class="el" href="driver__FXOS8700_8c_source.html">driver_FXOS8700.c</a>.</p>

<p>Referenced by <a class="el" href="main__agm01__freertos__two__tasks_8c_source.html#l00072">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;{</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    int8_t  sts1 = 0;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    int8_t  sts2 = 0;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor">#if F_USING_ACCEL</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        sts1 = FXOS8700_ReadAccData(sensor, sfg);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#if F_USING_MAG</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        sts2 = <a class="code" href="driver__FXOS8700_8c.html#a426c0f9617cbeffebfeaadd6446c3bc2">FXOS8700_ReadMagData</a>(sensor, sfg);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (sts1)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">return</span> (sts1);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">return</span> (sts2);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div><div class="ttc" id="driver__FXOS8700_8c_html_a426c0f9617cbeffebfeaadd6446c3bc2"><div class="ttname"><a href="driver__FXOS8700_8c.html#a426c0f9617cbeffebfeaadd6446c3bc2">FXOS8700_ReadMagData</a></div><div class="ttdeci">int8_t FXOS8700_ReadMagData(PhysicalSensor *sensor, SensorFusionGlobals *sfg)</div><div class="ttdef"><b>Definition:</b> <a href="driver__FXOS8700_8c_source.html#l00236">driver_FXOS8700.c:236</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a15f78e72d6a7dec25d95d97fa4c8d00e_cgraph.png" border="0" usemap="#drivers_8h_a15f78e72d6a7dec25d95d97fa4c8d00e_cgraph" alt=""/></div>
<map name="drivers_8h_a15f78e72d6a7dec25d95d97fa4c8d00e_cgraph" id="drivers_8h_a15f78e72d6a7dec25d95d97fa4c8d00e_cgraph">
<area shape="rect" id="node2" href="driver__FXOS8700_8c.html#a426c0f9617cbeffebfeaadd6446c3bc2" title="FXOS8700_ReadMagData" alt="" coords="175,31,348,57"/>
<area shape="rect" id="node3" href="sensor__fusion_8c.html#a2686eeb8ae44e588362478db1f757a0e" title="conditionSample ensures that we never encounter the maximum negative two&#39;s complement value for a 16&#45;..." alt="" coords="396,5,515,32"/>
<area shape="rect" id="node4" href="sensor__fusion_8c.html#aaed8e08f6d3e766cdf1314193f6b124a" title="addToFifo is called from within sensor driver read functions " alt="" coords="416,56,495,83"/>
</map>
</div>
</p>

<p><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a15f78e72d6a7dec25d95d97fa4c8d00e_icgraph.png" border="0" usemap="#drivers_8h_a15f78e72d6a7dec25d95d97fa4c8d00e_icgraph" alt=""/></div>
<map name="drivers_8h_a15f78e72d6a7dec25d95d97fa4c8d00e_icgraph" id="drivers_8h_a15f78e72d6a7dec25d95d97fa4c8d00e_icgraph">
<area shape="rect" id="node2" href="main__agm01__freertos__two__tasks_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="175,5,225,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a708eb59e48e61ea04dce5a3d07884933"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MAG3110_Idle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__MAG3110_8c_source.html#l00168">168</a> of file <a class="el" href="driver__MAG3110_8c_source.html">driver_MAG3110.c</a>.</p>

<p>Referenced by <a class="el" href="main__freertos__agm02__power__cycling_8c_source.html#l00135">fusion_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    int32_t     status;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span>(sensor-&gt;<a class="code" href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">isInitialized</a> == <a class="code" href="magnetic_8h.html#a78765407e471fe0b9119e5ff41aa7d16">F_USING_MAG</a>) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        status = Sensor_I2C_Write(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a>, <a class="code" href="driver__MAG3110_8c.html#a1f3a34c1322fe026ab8bdabe1c45105e">MAG3110_IDLE</a> );</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        sensor-&gt;<a class="code" href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">isInitialized</a> = 0;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>.<a class="code" href="structMagSensor.html#aaa521633aa149ccf8d2eab52b4a2abe0">isEnabled</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">return</span> SENSOR_ERROR_INIT;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">return</span> status;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div><div class="ttc" id="structPhysicalSensor_html_aa7b3c47e2be4d604bc40157d590d09b2"><div class="ttname"><a href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">PhysicalSensor::bus_driver</a></div><div class="ttdeci">void * bus_driver</div><div class="ttdoc">should be of type (ARM_DRIVER_I2C* for I2C-based sensors, ARM_DRIVER_SPI* for SPI) ...</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00171">sensor_fusion.h:171</a></div></div>
<div class="ttc" id="structSensorFusionGlobals_html_a876af8fddc05153d04bda2d8a8107819"><div class="ttname"><a href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">SensorFusionGlobals::Mag</a></div><div class="ttdeci">MagSensor Mag</div><div class="ttdoc">magnetometer storage </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00492">sensor_fusion.h:492</a></div></div>
<div class="ttc" id="driver__MAG3110_8c_html_a1f3a34c1322fe026ab8bdabe1c45105e"><div class="ttname"><a href="driver__MAG3110_8c.html#a1f3a34c1322fe026ab8bdabe1c45105e">MAG3110_IDLE</a></div><div class="ttdeci">const registerwritelist_t MAG3110_IDLE[]</div><div class="ttdef"><b>Definition:</b> <a href="driver__MAG3110_8c_source.html#l00160">driver_MAG3110.c:160</a></div></div>
<div class="ttc" id="structMagSensor_html_aaa521633aa149ccf8d2eab52b4a2abe0"><div class="ttname"><a href="structMagSensor.html#aaa521633aa149ccf8d2eab52b4a2abe0">MagSensor::isEnabled</a></div><div class="ttdeci">bool isEnabled</div><div class="ttdoc">true if the device is sampling </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00230">sensor_fusion.h:230</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a87223885ad859bb82fdc45644bc1f0b2"><div class="ttname"><a href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">PhysicalSensor::isInitialized</a></div><div class="ttdeci">uint16_t isInitialized</div><div class="ttdoc">Bitfields to indicate sensor is active (use SensorBitFields from build.h) </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00173">sensor_fusion.h:173</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a41a6aad09727eb120338c35535a652a6"><div class="ttname"><a href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">PhysicalSensor::addr</a></div><div class="ttdeci">uint16_t addr</div><div class="ttdoc">I2C address if applicable. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00172">sensor_fusion.h:172</a></div></div>
<div class="ttc" id="magnetic_8h_html_a78765407e471fe0b9119e5ff41aa7d16"><div class="ttname"><a href="magnetic_8h.html#a78765407e471fe0b9119e5ff41aa7d16">F_USING_MAG</a></div><div class="ttdeci">#define F_USING_MAG</div><div class="ttdef"><b>Definition:</b> <a href="magnetic_8h_source.html#l00038">magnetic.h:38</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a708eb59e48e61ea04dce5a3d07884933_icgraph.png" border="0" usemap="#drivers_8h_a708eb59e48e61ea04dce5a3d07884933_icgraph" alt=""/></div>
<map name="drivers_8h_a708eb59e48e61ea04dce5a3d07884933_icgraph" id="drivers_8h_a708eb59e48e61ea04dce5a3d07884933_icgraph">
<area shape="rect" id="node2" href="main__freertos__agm02__power__cycling_8c.html#a022f0b0afee40ef57a0ac6e6db65cab6" title="fusion_task" alt="" coords="160,31,248,57"/>
<area shape="rect" id="node3" href="main__freertos__agm02__power__cycling_8c.html#a9ca051aa77e17583aa5a85d5de5c199a" title="vApplicationTickHook" alt="" coords="296,5,441,32"/>
<area shape="rect" id="node4" href="main__freertos__agm02__power__cycling_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="343,56,394,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab25e9152fa726f2bcd148b9a0dbde157"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MAG3110_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__MAG3110_8c_source.html#l00103">103</a> of file <a class="el" href="driver__MAG3110_8c_source.html">driver_MAG3110.c</a>.</p>

<p>Referenced by <a class="el" href="main__freertos__agm02__power__cycling_8c_source.html#l00135">fusion_task()</a>, and <a class="el" href="main__freertos__agm02_8c_source.html#l00072">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    int32_t status;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    uint8_t reg;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    status = Register_I2C_Read(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a>, MAG3110_WHO_AM_I, 1, &amp;reg);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (status==SENSOR_ERROR_NONE) {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>.<a class="code" href="structMagSensor.html#a895f3236864f6fe000df494c55c112fb">iWhoAmI</a> = reg;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">if</span> (reg!=MAG3110_WHOAMI_VALUE) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;             <span class="keywordflow">return</span>(SENSOR_ERROR_INIT);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="comment">// iWhoAmI will return default value of zero</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="comment">// return with error</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">return</span>(SENSOR_ERROR_INIT);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// Configure and start the MAG3110 sensor.  This does multiple register writes</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// (see MAG3110_Initialization definition above)</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    status = Sensor_I2C_Write(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a>, <a class="code" href="driver__MAG3110_8c.html#a169d2185b7c090d79deeb3e16b41dab9">MAG3110_Initialization</a> );</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// Stash some needed constants in the SF data structure for this sensor</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>.<a class="code" href="structMagSensor.html#a8d14850aea4f6f78343db74f3208f5d0">iCountsPeruT</a> = <a class="code" href="driver__MAG3110_8c.html#adbf5c8a408890310814f5c4164bea016">MAG3110_COUNTSPERUT</a>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>.<a class="code" href="structMagSensor.html#ac3901ffb470c673ebef71c65f475976f">fCountsPeruT</a> = (float)<a class="code" href="driver__MAG3110_8c.html#adbf5c8a408890310814f5c4164bea016">MAG3110_COUNTSPERUT</a>; <span class="comment">// IAR optimized this out without the #pragma before the function</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>.<a class="code" href="structMagSensor.html#a2caa6d9b17dec76fd4b56dc2e81becbd">fuTPerCount</a> = 1.0F / <a class="code" href="driver__MAG3110_8c.html#adbf5c8a408890310814f5c4164bea016">MAG3110_COUNTSPERUT</a>;  <span class="comment">// IAR optimized this out without the #pragma before the function</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    sensor-&gt;<a class="code" href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">isInitialized</a> = <a class="code" href="magnetic_8h.html#a78765407e471fe0b9119e5ff41aa7d16">F_USING_MAG</a>;        <span class="comment">// IAR optimized this out without the #pragma before the function</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>.<a class="code" href="structMagSensor.html#aaa521633aa149ccf8d2eab52b4a2abe0">isEnabled</a> = <span class="keyword">true</span>;                  <span class="comment">// IAR optimized this out without the #pragma before the function</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">return</span> (status);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div><div class="ttc" id="structPhysicalSensor_html_aa7b3c47e2be4d604bc40157d590d09b2"><div class="ttname"><a href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">PhysicalSensor::bus_driver</a></div><div class="ttdeci">void * bus_driver</div><div class="ttdoc">should be of type (ARM_DRIVER_I2C* for I2C-based sensors, ARM_DRIVER_SPI* for SPI) ...</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00171">sensor_fusion.h:171</a></div></div>
<div class="ttc" id="structMagSensor_html_a8d14850aea4f6f78343db74f3208f5d0"><div class="ttname"><a href="structMagSensor.html#a8d14850aea4f6f78343db74f3208f5d0">MagSensor::iCountsPeruT</a></div><div class="ttdeci">int16_t iCountsPeruT</div><div class="ttdoc">counts per uT </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00241">sensor_fusion.h:241</a></div></div>
<div class="ttc" id="structSensorFusionGlobals_html_a876af8fddc05153d04bda2d8a8107819"><div class="ttname"><a href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">SensorFusionGlobals::Mag</a></div><div class="ttdeci">MagSensor Mag</div><div class="ttdoc">magnetometer storage </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00492">sensor_fusion.h:492</a></div></div>
<div class="ttc" id="structMagSensor_html_a2caa6d9b17dec76fd4b56dc2e81becbd"><div class="ttname"><a href="structMagSensor.html#a2caa6d9b17dec76fd4b56dc2e81becbd">MagSensor::fuTPerCount</a></div><div class="ttdeci">float fuTPerCount</div><div class="ttdoc">uT per count </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00237">sensor_fusion.h:237</a></div></div>
<div class="ttc" id="structMagSensor_html_aaa521633aa149ccf8d2eab52b4a2abe0"><div class="ttname"><a href="structMagSensor.html#aaa521633aa149ccf8d2eab52b4a2abe0">MagSensor::isEnabled</a></div><div class="ttdeci">bool isEnabled</div><div class="ttdoc">true if the device is sampling </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00230">sensor_fusion.h:230</a></div></div>
<div class="ttc" id="structMagSensor_html_ac3901ffb470c673ebef71c65f475976f"><div class="ttname"><a href="structMagSensor.html#ac3901ffb470c673ebef71c65f475976f">MagSensor::fCountsPeruT</a></div><div class="ttdeci">float fCountsPeruT</div><div class="ttdoc">counts per uT </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00238">sensor_fusion.h:238</a></div></div>
<div class="ttc" id="driver__MAG3110_8c_html_a169d2185b7c090d79deeb3e16b41dab9"><div class="ttname"><a href="driver__MAG3110_8c.html#a169d2185b7c090d79deeb3e16b41dab9">MAG3110_Initialization</a></div><div class="ttdeci">const registerwritelist_t MAG3110_Initialization[]</div><div class="ttdef"><b>Definition:</b> <a href="driver__MAG3110_8c_source.html#l00063">driver_MAG3110.c:63</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a87223885ad859bb82fdc45644bc1f0b2"><div class="ttname"><a href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">PhysicalSensor::isInitialized</a></div><div class="ttdeci">uint16_t isInitialized</div><div class="ttdoc">Bitfields to indicate sensor is active (use SensorBitFields from build.h) </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00173">sensor_fusion.h:173</a></div></div>
<div class="ttc" id="driver__MAG3110_8c_html_adbf5c8a408890310814f5c4164bea016"><div class="ttname"><a href="driver__MAG3110_8c.html#adbf5c8a408890310814f5c4164bea016">MAG3110_COUNTSPERUT</a></div><div class="ttdeci">#define MAG3110_COUNTSPERUT</div><div class="ttdef"><b>Definition:</b> <a href="driver__MAG3110_8c_source.html#l00040">driver_MAG3110.c:40</a></div></div>
<div class="ttc" id="structMagSensor_html_a895f3236864f6fe000df494c55c112fb"><div class="ttname"><a href="structMagSensor.html#a895f3236864f6fe000df494c55c112fb">MagSensor::iWhoAmI</a></div><div class="ttdeci">uint8_t iWhoAmI</div><div class="ttdoc">sensor whoami </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00229">sensor_fusion.h:229</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a41a6aad09727eb120338c35535a652a6"><div class="ttname"><a href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">PhysicalSensor::addr</a></div><div class="ttdeci">uint16_t addr</div><div class="ttdoc">I2C address if applicable. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00172">sensor_fusion.h:172</a></div></div>
<div class="ttc" id="magnetic_8h_html_a78765407e471fe0b9119e5ff41aa7d16"><div class="ttname"><a href="magnetic_8h.html#a78765407e471fe0b9119e5ff41aa7d16">F_USING_MAG</a></div><div class="ttdeci">#define F_USING_MAG</div><div class="ttdef"><b>Definition:</b> <a href="magnetic_8h_source.html#l00038">magnetic.h:38</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_ab25e9152fa726f2bcd148b9a0dbde157_icgraph.png" border="0" usemap="#drivers_8h_ab25e9152fa726f2bcd148b9a0dbde157_icgraph" alt=""/></div>
<map name="drivers_8h_ab25e9152fa726f2bcd148b9a0dbde157_icgraph" id="drivers_8h_ab25e9152fa726f2bcd148b9a0dbde157_icgraph">
<area shape="rect" id="node2" href="main__freertos__agm02__power__cycling_8c.html#a022f0b0afee40ef57a0ac6e6db65cab6" title="fusion_task" alt="" coords="157,31,245,57"/>
<area shape="rect" id="node5" href="main__freertos__agm02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="176,81,227,108"/>
<area shape="rect" id="node3" href="main__freertos__agm02__power__cycling_8c.html#a9ca051aa77e17583aa5a85d5de5c199a" title="vApplicationTickHook" alt="" coords="293,5,439,32"/>
<area shape="rect" id="node4" href="main__freertos__agm02__power__cycling_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="341,56,391,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a814ed032bb557dfa5bd0349d06b92d26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MAG3110_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="driver__MAG3110_8c_source.html#l00134">134</a> of file <a class="el" href="driver__MAG3110_8c_source.html">driver_MAG3110.c</a>.</p>

<p>Referenced by <a class="el" href="main__freertos__agm02_8c_source.html#l00072">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    uint8_t                     I2C_Buffer[6];  <span class="comment">// I2C read buffer</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    int8_t                      status;         <span class="comment">// I2C transaction status</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    int16_t                     sample[3];      <span class="comment">// Reconstructed sample</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span>(sensor-&gt;<a class="code" href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">isInitialized</a> != <a class="code" href="magnetic_8h.html#a78765407e471fe0b9119e5ff41aa7d16">F_USING_MAG</a>)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">return</span> SENSOR_ERROR_INIT;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    status =  Sensor_I2C_Read(sensor-&gt;<a class="code" href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">bus_driver</a>, sensor-&gt;<a class="code" href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">addr</a>, <a class="code" href="driver__MAG3110_8c.html#a7b0b70dd50ccb2b97cc0f746e8c3d6c6">MAG3110_DATA_READ</a>, I2C_Buffer );</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    sample[<a class="code" href="sensor__fusion_8h.html#a48bbd27e913de8d7749dff9dec2fe816">CHX</a>] = (I2C_Buffer[0] &lt;&lt; 8) | I2C_Buffer[1];</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    sample[<a class="code" href="sensor__fusion_8h.html#a6a25024f52cc6bea13d19f8b68456cea">CHY</a>] = (I2C_Buffer[2] &lt;&lt; 8) | I2C_Buffer[3];</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    sample[<a class="code" href="sensor__fusion_8h.html#a76143891435bdd7248857e45b93521ed">CHZ</a>] = (I2C_Buffer[4] &lt;&lt; 8) | I2C_Buffer[5];</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (status==SENSOR_ERROR_NONE) {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="sensor__fusion_8c.html#a2686eeb8ae44e588362478db1f757a0e">conditionSample</a>(sample);  <span class="comment">// truncate negative values to -32767</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        sample[<a class="code" href="sensor__fusion_8h.html#a76143891435bdd7248857e45b93521ed">CHZ</a>] = -sample[<a class="code" href="sensor__fusion_8h.html#a76143891435bdd7248857e45b93521ed">CHZ</a>];  <span class="comment">// +Z should point up (MAG3110 Z positive is down)</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="sensor__fusion_8c.html#aaed8e08f6d3e766cdf1314193f6b124a">addToFifo</a>((<a class="code" href="unionFifoSensor.html">FifoSensor</a>*) &amp;(sfg-&gt;<a class="code" href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">Mag</a>), <a class="code" href="standard__build_8h.html#a70f426efebfaf78d005d9639b589b6e5">MAG_FIFO_SIZE</a>, sample);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">return</span> (status);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div><div class="ttc" id="sensor__fusion_8h_html_a6a25024f52cc6bea13d19f8b68456cea"><div class="ttname"><a href="sensor__fusion_8h.html#a6a25024f52cc6bea13d19f8b68456cea">CHY</a></div><div class="ttdeci">#define CHY</div><div class="ttdoc">Used to access Y-channel entries in various data data structures. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00077">sensor_fusion.h:77</a></div></div>
<div class="ttc" id="sensor__fusion_8c_html_aaed8e08f6d3e766cdf1314193f6b124a"><div class="ttname"><a href="sensor__fusion_8c.html#aaed8e08f6d3e766cdf1314193f6b124a">addToFifo</a></div><div class="ttdeci">void addToFifo(FifoSensor *sensor, uint16_t maxFifoSize, int16_t sample[3])</div><div class="ttdoc">addToFifo is called from within sensor driver read functions </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8c_source.html#l00531">sensor_fusion.c:531</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_aa7b3c47e2be4d604bc40157d590d09b2"><div class="ttname"><a href="structPhysicalSensor.html#aa7b3c47e2be4d604bc40157d590d09b2">PhysicalSensor::bus_driver</a></div><div class="ttdeci">void * bus_driver</div><div class="ttdoc">should be of type (ARM_DRIVER_I2C* for I2C-based sensors, ARM_DRIVER_SPI* for SPI) ...</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00171">sensor_fusion.h:171</a></div></div>
<div class="ttc" id="standard__build_8h_html_a70f426efebfaf78d005d9639b589b6e5"><div class="ttname"><a href="standard__build_8h.html#a70f426efebfaf78d005d9639b589b6e5">MAG_FIFO_SIZE</a></div><div class="ttdeci">#define MAG_FIFO_SIZE</div><div class="ttdoc">FXOS8700 (mag), MAG3110 have no FIFO so equivalent to 1 element FIFO. </div><div class="ttdef"><b>Definition:</b> <a href="standard__build_8h_source.html#l00080">standard_build.h:80</a></div></div>
<div class="ttc" id="structSensorFusionGlobals_html_a876af8fddc05153d04bda2d8a8107819"><div class="ttname"><a href="structSensorFusionGlobals.html#a876af8fddc05153d04bda2d8a8107819">SensorFusionGlobals::Mag</a></div><div class="ttdeci">MagSensor Mag</div><div class="ttdoc">magnetometer storage </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00492">sensor_fusion.h:492</a></div></div>
<div class="ttc" id="unionFifoSensor_html"><div class="ttname"><a href="unionFifoSensor.html">FifoSensor</a></div><div class="ttdoc">The FifoSensor union allows us to use common pointers for Accel, Mag &amp; Gyro logical sensor structures...</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00266">sensor_fusion.h:266</a></div></div>
<div class="ttc" id="sensor__fusion_8h_html_a76143891435bdd7248857e45b93521ed"><div class="ttname"><a href="sensor__fusion_8h.html#a76143891435bdd7248857e45b93521ed">CHZ</a></div><div class="ttdeci">#define CHZ</div></div>
<div class="ttc" id="sensor__fusion_8h_html_a48bbd27e913de8d7749dff9dec2fe816"><div class="ttname"><a href="sensor__fusion_8h.html#a48bbd27e913de8d7749dff9dec2fe816">CHX</a></div><div class="ttdeci">#define CHX</div><div class="ttdoc">Used to access X-channel entries in various data data structures. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00076">sensor_fusion.h:76</a></div></div>
<div class="ttc" id="sensor__fusion_8c_html_a2686eeb8ae44e588362478db1f757a0e"><div class="ttname"><a href="sensor__fusion_8c.html#a2686eeb8ae44e588362478db1f757a0e">conditionSample</a></div><div class="ttdeci">void conditionSample(int16_t sample[3])</div><div class="ttdoc">conditionSample ensures that we never encounter the maximum negative two&amp;#39;s complement value for a 16-...</div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8c_source.html#l00519">sensor_fusion.c:519</a></div></div>
<div class="ttc" id="driver__MAG3110_8c_html_a7b0b70dd50ccb2b97cc0f746e8c3d6c6"><div class="ttname"><a href="driver__MAG3110_8c.html#a7b0b70dd50ccb2b97cc0f746e8c3d6c6">MAG3110_DATA_READ</a></div><div class="ttdeci">registerreadlist_t MAG3110_DATA_READ[]</div><div class="ttdef"><b>Definition:</b> <a href="driver__MAG3110_8c_source.html#l00057">driver_MAG3110.c:57</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a87223885ad859bb82fdc45644bc1f0b2"><div class="ttname"><a href="structPhysicalSensor.html#a87223885ad859bb82fdc45644bc1f0b2">PhysicalSensor::isInitialized</a></div><div class="ttdeci">uint16_t isInitialized</div><div class="ttdoc">Bitfields to indicate sensor is active (use SensorBitFields from build.h) </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00173">sensor_fusion.h:173</a></div></div>
<div class="ttc" id="structPhysicalSensor_html_a41a6aad09727eb120338c35535a652a6"><div class="ttname"><a href="structPhysicalSensor.html#a41a6aad09727eb120338c35535a652a6">PhysicalSensor::addr</a></div><div class="ttdeci">uint16_t addr</div><div class="ttdoc">I2C address if applicable. </div><div class="ttdef"><b>Definition:</b> <a href="sensor__fusion_8h_source.html#l00172">sensor_fusion.h:172</a></div></div>
<div class="ttc" id="magnetic_8h_html_a78765407e471fe0b9119e5ff41aa7d16"><div class="ttname"><a href="magnetic_8h.html#a78765407e471fe0b9119e5ff41aa7d16">F_USING_MAG</a></div><div class="ttdeci">#define F_USING_MAG</div><div class="ttdef"><b>Definition:</b> <a href="magnetic_8h_source.html#l00038">magnetic.h:38</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a814ed032bb557dfa5bd0349d06b92d26_cgraph.png" border="0" usemap="#drivers_8h_a814ed032bb557dfa5bd0349d06b92d26_cgraph" alt=""/></div>
<map name="drivers_8h_a814ed032bb557dfa5bd0349d06b92d26_cgraph" id="drivers_8h_a814ed032bb557dfa5bd0349d06b92d26_cgraph">
<area shape="rect" id="node2" href="sensor__fusion_8c.html#a2686eeb8ae44e588362478db1f757a0e" title="conditionSample ensures that we never encounter the maximum negative two&#39;s complement value for a 16&#45;..." alt="" coords="171,5,289,32"/>
<area shape="rect" id="node3" href="sensor__fusion_8c.html#aaed8e08f6d3e766cdf1314193f6b124a" title="addToFifo is called from within sensor driver read functions " alt="" coords="191,56,269,83"/>
</map>
</div>
</p>

<p><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a814ed032bb557dfa5bd0349d06b92d26_icgraph.png" border="0" usemap="#drivers_8h_a814ed032bb557dfa5bd0349d06b92d26_icgraph" alt=""/></div>
<map name="drivers_8h_a814ed032bb557dfa5bd0349d06b92d26_icgraph" id="drivers_8h_a814ed032bb557dfa5bd0349d06b92d26_icgraph">
<area shape="rect" id="node2" href="main__freertos__agm02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a FreeRTOS (dual task) implementation of the NXP sensor fusion demo build. " alt="" coords="171,5,221,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a222c12af70c00e7e6c67f665180b0645"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MMA8451_Idle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a23a0c55b69ebc03426cc9dd26d7560de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MMA8451_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a548e731f3f5eacb312e663f537338d97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MMA8451_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0dca683dd2636b2638f42bb93ab71ea4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MMA8652_Idle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a17ba4ee17faecde2b6752868995c768b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MMA8652_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af305ac46dced67ca87098d066b777ab2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MMA8652_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a379dd1bcbaab047712b8cebb922fbd51"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MPL3115_Idle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3e1e95cf3c04b11bd0aea5368269e4e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MPL3115_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="main__baremetal_8c_source.html#l00065">main()</a>.</p>

<p><div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a3e1e95cf3c04b11bd0aea5368269e4e3_icgraph.png" border="0" usemap="#drivers_8h_a3e1e95cf3c04b11bd0aea5368269e4e3_icgraph" alt=""/></div>
<map name="drivers_8h_a3e1e95cf3c04b11bd0aea5368269e4e3_icgraph" id="drivers_8h_a3e1e95cf3c04b11bd0aea5368269e4e3_icgraph">
<area shape="rect" id="node2" href="main__baremetal_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a bare&#45;metal implementation of the NXP sensor fusion demo build. " alt="" coords="155,5,205,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6c7ac9be0b5038427b17e268320018ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MPL3115_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td>
          <td class="paramname"><em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="main__baremetal_8c_source.html#l00065">main()</a>.</p>

<p><div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="drivers_8h_a6c7ac9be0b5038427b17e268320018ac_icgraph.png" border="0" usemap="#drivers_8h_a6c7ac9be0b5038427b17e268320018ac_icgraph" alt=""/></div>
<map name="drivers_8h_a6c7ac9be0b5038427b17e268320018ac_icgraph" id="drivers_8h_a6c7ac9be0b5038427b17e268320018ac_icgraph">
<area shape="rect" id="node2" href="main__baremetal_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="This is a bare&#45;metal implementation of the NXP sensor fusion demo build. " alt="" coords="168,5,219,32"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
<!--    <li class="footer"> &copy; 2016 Freescale Semiconductor, Inc. All rights reserved. 
    </li> -->
	    <li class="footer"> &copy; 2016 NXP B.V. 
    </li>
  </ul>
</div>
</body>
</html>
